<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Crypto‑Prices Banner v20</title>
<style>
 :root{
  --h:50px;                   /* altura da faixa                      */
  --speed:150s;               /* ↑ quanto MAIOR mais devagar          */
  --bg:#0e1117;               /* cor de fundo                         */
  --fg:#e8eaed;               /* texto                                */
  --div:#2c313d;              /* divisórias verticais                 */
 }
 html,body{margin:0;background:transparent;font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",Arial,sans-serif;}
 #banner{position:fixed;left:0;right:0;top:0;height:var(--h);background:var(--bg);color:var(--fg);overflow:hidden;white-space:nowrap;z-index:9999;box-shadow:0 3px 8px rgba(0,0,0,.45);}
 .track{display:flex;align-items:center;height:100%;animation:scroll var(--speed) linear infinite;will-change:transform;}
 #banner:hover .track{animation-play-state:paused;}
 @keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}
 .item{display:flex;align-items:center;gap:6px;padding:0 14px;border-right:1px solid var(--div);font-size:13px;font-weight:600;min-width:140px;}
 .item img{width:18px;height:18px;border-radius:50%;object-fit:contain;flex:none;background:#fff;}
 .up{color:#00d97e}.down{color:#ff5c5c}
</style>
</head>
<body>
<div id="banner"><div id="track" class="track"></div></div>
<script>
/* =============================================================
   Crypto‑prices banner v20  (single request + icones CoinGecko)
   =============================================================*/

const IDS=[
  ["bitcoin","BTC"], ["ethereum","ETH"],  ["solana","SOL"],   ["tron","TRX"],        ["dogecoin","DOGE"],
  ["hyperliquid","HYPE"],["sui","SUI"],      ["chainlink","LINK"],["avalanche-2","AVAX"], ["toncoin","TON"],
  ["shiba-inu","SHIB"], ["monero","XMR"],   ["polkadot","DOT"],  ["uniswap","UNI"],      ["pepe","PEPE"],
  ["aave","AAVE"],      ["near","NEAR"],    ["ondo-finance","ONDO"],["render-token","RNDR"],["cosmos","ATOM"],
  ["arbitrum","ARB"],   ["jupiter","JUP"],  ["celestia","TIA"],  ["fartcoin","FART"],    ["sei-network","SEI"],
  ["stacks","STX"],     ["dogwifhat","WIF"],["jito-governance-token","JTO"], ["lido-dao","LDO"], ["pendle","PENDLE"],
  ["eigenlayer","EIGEN"],["etherfi","ETHERFI"],["popcat","POPCAT"],["layerzero","ZRO"],["virtuals-protocol","VIRTUAL"]
];

// -------------- helpers ---------------------------------------
const fmt   = n=>n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});
const letter=s=>`<span style="display:inline-block;width:18px;height:18px;line-height:18px;font-size:11px;font-weight:700;background:#40454f;border-radius:50%;text-align:center;color:#fff;">${s[0]}</span>`;
const sleep = ms=>new Promise(r=>setTimeout(r,ms));

async function fetchJSON(url){
  try{
    const r=await fetch(url);
    if(!r.ok) throw new Error(r.status);
    return r.json();
  }catch{
    // fallback CORS proxy (evita bloqueio localisation)
    const r=await fetch(`https://corsproxy.io/?${encodeURIComponent(url)}`);
    return r.json();
  }
}

async function load(){
  const banner=document.getElementById("banner");
  try{
    const idsParam=IDS.map(c=>c[0]).join(",");
    const url=`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=${idsParam}&price_change_percentage=24h`;
    const data=await fetchJSON(url);         // um único pedido com preços + imagem
    const mp=Object.fromEntries(data.map(o=>[o.id,o]));

    const html=IDS.map(([id,sym])=>{
      const d=mp[id];
      if(!d) return "";
      const ch=d.price_change_percentage_24h; const cls=ch>=0?"up":"down"; const sign=ch>=0?"+":"";
      const img=d.image?`<img src="${d.image}" onerror="this.outerHTML='${letter(sym)}'">`:letter(sym);
      return `<div class="item">${img}<b>${sym}</b> $${fmt(d.current_price)} <span class="${cls}">${sign}${fmt(ch)}%</span></div>`;
    }).filter(Boolean);

    if(!html.length) throw new Error("sem dados");
    const track=document.getElementById("track");
    track.innerHTML=html.join("")+html.join("");  // duplica para rolar infinito
  }catch(e){
    console.error(e);
    banner.textContent="⚠️ erro ao carregar preços";
  }
}

load();
setInterval(load,60_000);
</script>
</body>
</html>
