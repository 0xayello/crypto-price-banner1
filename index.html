<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Crypto‑Ticker v25</title>
  <style>
    :root{
      --height:46px;          /* banner height                     */
      --speed:140s;           /* scroll speed – bigger = slower    */
      --bg:#0d1117;           /* background                        */
      --fg:#e6e8ea;           /* foreground text                   */
      --div:#272b33;          /* dividers                          */
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{background:transparent;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif;}
    #bar{position:fixed;left:0;right:0;top:0;height:var(--height);background:var(--bg);color:var(--fg);white-space:nowrap;overflow:hidden;z-index:9999;display:flex;align-items:center;font-size:14px;line-height:1;font-weight:600;box-shadow:0 3px 8px rgba(0,0,0,.45)}
    #track{display:flex;align-items:center;animation:scroll var(--speed) linear infinite}
    #bar:hover #track{animation-play-state:paused}
    @keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}
    .token{display:flex;align-items:center;gap:6px;padding:0 14px;border-right:1px solid var(--div);min-width:165px}
    .token img{width:18px;height:18px;border-radius:50%;object-fit:contain;background:#fff;flex:none}
    .up{color:#00d57b}.down{color:#ff5d5d}
    .fallback{display:inline-block;width:18px;height:18px;border-radius:50%;background:#3b4048;color:#fff;font-size:11px;font-weight:700;text-align:center;line-height:18px}
  </style>
</head>
<body>
  <div id="bar"><div id="track"></div></div>

<script>
// ------------- configurable list (slug , symbol) ---------------------------
const TOKENS=[
 ["bitcoin","BTC"],["ethereum","ETH"],["solana","SOL"],["tron","TRX"],["dogecoin","DOGE"],
 ["hyperliquid","HYPE"],["sui","SUI"],["chainlink","LINK"],["avalanche-2","AVAX"],["toncoin","TON"],
 ["shiba-inu","SHIB"],["monero","XMR"],["polkadot","DOT"],["uniswap","UNI"],["pepe","PEPE"],
 ["aave","AAVE"],["near","NEAR"],["ondo-finance","ONDO"],["render-token","RNDR"],["cosmos","ATOM"],
 ["arbitrum","ARB"],["jupiter","JUP"],["celestia","TIA"],["fartcoin","FART"],["sei-network","SEI"],
 ["stacks","STX"],["dogwifhat","WIF"],["jito-governance-token","JTO"],["lido-dao","LDO"],["pendle","PENDLE"],
 ["eigenlayer","EIGEN"],["etherfi","ETHFI"],["popcat","POPCAT"],["layerzero","ZRO"],["virtuals-protocol","VIRTUAL"]
];

// ------------ helpers ------------------------------------------------------
const fmt=(v,small)=>v.toLocaleString("en-US",{minimumFractionDigits:small?3:2,maximumFractionDigits:small?4:2});
const pctFmt=v=>v.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});
const cgIcon=(slug)=>`https://assets.coingecko.com/coins/images/${slug}/thumb.png`; // we'll attempt later via map
const icon=(sym)=>`https://raw.githubusercontent.com/spothq/cryptocurrency-icons/master/32/color/${sym.toLowerCase()}.png`;
const letter=(sym)=>`<span class="fallback">${sym[0]}</span>`;
const PROXY="https://corsproxy.io/?";
const DEMO_KEY="cg-demo-api-key"; // public demo key – replace with your own for higher quota

async function fetchData(){
  const ids=TOKENS.map(t=>t[0]).join(",");
  const url=`${PROXY}${encodeURIComponent(`https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd&include_24hr_change=true&x_cg_demo_api_key=${DEMO_KEY}`)}`;
  const res=await fetch(url);
  if(!res.ok) throw new Error(res.status);
  return res.json();
}

async function build(){
  const bar=document.getElementById("bar");
  const track=document.getElementById("track");
  try{
    const data=await fetchData();
    const parts=[];
    for(const [slug,sym] of TOKENS){
      const d=data[slug];
      if(!d) continue;
      const price=d.usd; if(price==null) continue;
      const change=d.usd_24h_change??0;
      const cls=change>=0?"up":"down";
      const sign=change>=0?"+":"";
      const img=`<img src="${icon(sym)}" onerror="this.onerror=null;this.src='';this.outerHTML='${letter(sym)}'">`;
      parts.push(`<div class="token">${img}<b>${sym}</b> $${fmt(price,price<1)} <span class="${cls}">${sign}${pctFmt(change)}%</span></div>`);
    }
    if(!parts.length) throw new Error("empty");
    track.innerHTML=parts.join("")+parts.join("");
  }catch(e){
    console.error(e);
    bar.textContent="⚠️ erro ao carregar preços";
  }
}

build();
setInterval(build,120000); // refresh every 2 min to stay under rate‑limit
</script>
</body>
</html>
