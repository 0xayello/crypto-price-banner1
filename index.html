<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Crypto Prices Banner</title>
<style>
 :root{
  --banner-h:50px;
  --scroll-duration:120s;
  --bg:#0e1117;--text:#e6e8ea;--divider:#2c313d;
 }
 html,body{margin:0;padding:0;background:transparent;font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",Helvetica,Arial,sans-serif;}
 #cryptoBanner{position:absolute;inset:0 auto auto 0;height:var(--banner-h);background:var(--bg);color:var(--text);overflow:hidden;white-space:nowrap;box-shadow:0 3px 8px rgba(0,0,0,.45);}  
 .track{display:flex;height:100%;align-items:center;animation:scroll var(--scroll-duration) linear infinite;will-change:transform;}  
 @keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}  
 #cryptoBanner:hover .track{animation-play-state:paused;}  
 .item{display:flex;align-items:center;gap:6px;padding:0 12px;border-right:1px solid var(--divider);font-size:13px;font-weight:600;}  
 .item img{height:18px;width:18px;object-fit:contain;}  
 .price{font-variant-numeric:tabular-nums;}  
 .up{color:#00d97e;} .down{color:#ff5c5c;}  
</style>
</head>
<body>
<div id="cryptoBanner"><div class="track" id="track"></div></div>
<script>
// ----------- CONFIG -------------
const COINS=[
  {id:"bitcoin",symbol:"BTC"},
  {id:"ethereum",symbol:"ETH"},
  {id:"binancecoin",symbol:"BNB"},
  {id:"solana",symbol:"SOL"},
  {id:"tron",symbol:"TRX"},
  {id:"dogecoin",symbol:"DOGE"},
  {id:"hyperliquid",symbol:"HYPER"},
  {id:"sui",symbol:"SUI"},
  {id:"chainlink",symbol:"LINK"},
  {id:"avalanche-2",symbol:"AVAX"},
  {id:"toncoin",symbol:"TON"},
  {id:"shiba-inu",symbol:"SHIB"},
  {id:"monero",symbol:"XMR"},
  {id:"polkadot",symbol:"DOT"},
  {id:"uniswap",symbol:"UNI"},
  {id:"pepe",symbol:"PEPE"},
  {id:"aave",symbol:"AAVE"},
  {id:"near",symbol:"NEAR"},
  {id:"ondo-finance",symbol:"ONDO"},
  {id:"render-token",symbol:"RNDR"},
  {id:"cosmos",symbol:"ATOM"},
  {id:"arbitrum",symbol:"ARB"},
  {id:"jupiter-exchange",symbol:"JUP"},
  {id:"celestia",symbol:"TIA"},
  {id:"fartcoin",symbol:"FART"},
  {id:"virtual",symbol:"VIRTUAL"},
  {id:"sei-network",symbol:"SEI"},
  {id:"stacks",symbol:"STX"},
  {id:"dogwifhat",symbol:"WIF"},
  {id:"jito-governance-token",symbol:"JTO"},
  {id:"lido-dao",symbol:"LDO"},
  {id:"pendle",symbol:"PENDLE"},
  {id:"eigenlayer",symbol:"EIGEN"},
  {id:"etherfi-staked-eth",symbol:"ETHFI"},
  {id:"dog",symbol:"DOG"},
  {id:"popcat",symbol:"POPCAT"},
  {id:"layerzero",symbol:"ZRO"},
  {id:"ai-16z",symbol:"AI16Z"}
];

// função para obter ícone (CDN primário + fallback)
const iconUrl=sym=>({
  primary:`https://cryptoicon-api.vercel.app/api/icon/${sym.toLowerCase()}`,
  fallback:`https://raw.githubusercontent.com/spothq/cryptocurrency-icons/master/32/color/${sym.toLowerCase()}.png`
});

const API=`https://api.coingecko.com/api/v3/simple/price?vs_currencies=usd&ids=${COINS.map(c=>c.id).join(',')}&include_24hr_change=true`;

// ----------- HELPERS ------------
const fmt=n=>n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});
function makeItem(c,price,change){
  const cls=change>=0?'up':'down';
  const sign=change>=0?'+':'';
  const urls=iconUrl(c.symbol);
  const img=`<img src="${urls.primary}" alt="${c.symbol}" onerror="if(this.src!=='${urls.fallback}')this.src='${urls.fallback}';else this.style.display='none';">`;
  return `<div class="item">${img}<span>${c.symbol}</span><span class="price">$${fmt(price)}</span><span class="${cls}">${sign}${fmt(change)}%</span></div>`;
}

// ----------- CORE ---------------
async function build(){
  try{
    const data=await fetch(API,{headers:{accept:'application/json'}}).then(r=>r.json());
    const items=COINS.map(c=>{
      const p=data[c.id];
      if(!p) return '';
      return makeItem(c,p.usd,p.usd_24hr_change);
    }).filter(Boolean).join('');
    document.getElementById('track').innerHTML=items+items; // duplicate for  seamless scroll
  }catch(e){
    console.error('CGK error',e);
    document.getElementById('cryptoBanner').innerText='⚠️ erro ao carregar preços';
  }
}

build();
setInterval(build,60*1000);
</script>
</body>
</html>
