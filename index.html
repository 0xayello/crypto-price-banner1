<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Crypto‑Prices Banner v23</title>
<style>
 :root{
  --h:50px;                   /* banner height                       */
  --speed:150s;               /* bigger = slower scroll              */
  --bg:#0e1117;               /* background colour                   */
  --fg:#e8eaed;               /* text colour                         */
  --div:#2c313d;              /* vertical dividers                   */
 }
 html,body{margin:0;background:transparent;font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",Arial,sans-serif;}
 #banner{position:fixed;left:0;right:0;top:0;height:var(--h);background:var(--bg);color:var(--fg);overflow:hidden;white-space:nowrap;z-index:9999;box-shadow:0 3px 8px rgba(0,0,0,.45);font-size:14px;}
 .track{display:flex;align-items:center;height:100%;animation:scroll var(--speed) linear infinite;will-change:transform;}
 #banner:hover .track{animation-play-state:paused;}
 @keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)} }
 .item{display:flex;align-items:center;gap:6px;padding:0 14px;border-right:1px solid var(--div);min-width:160px;font-weight:600;}
 .item img{width:18px;height:18px;border-radius:50%;object-fit:contain;flex:none;background:#fff;filter:brightness(0.95);}
 .up{color:#00d97e}.down{color:#ff5c5c}
</style>
</head>
<body>
<div id="banner"><div id="track" class="track"></div></div>
<script>
/* =============================================================
   Crypto‑price banner v23
   ‑ single call to CoinGecko simple/price (via corsproxy) for
     both price & 24h change.
   ‑ static icons from cryptocurrency‑icons repo (no CORS).
   =============================================================*/

const LIST=[
  ["bitcoin","BTC"], ["ethereum","ETH"], ["solana","SOL"], ["tron","TRX"], ["dogecoin","DOGE"],
  ["hyperliquid","HYPE"], ["sui","SUI"], ["chainlink","LINK"], ["avalanche-2","AVAX"], ["toncoin","TON"],
  ["shiba-inu","SHIB"], ["monero","XMR"], ["polkadot","DOT"], ["uniswap","UNI"], ["pepe","PEPE"],
  ["aave","AAVE"], ["near","NEAR"], ["ondo-finance","ONDO"], ["render-token","RNDR"], ["cosmos","ATOM"],
  ["arbitrum","ARB"], ["jupiter","JUP"], ["celestia","TIA"], ["fartcoin","FART"], ["sei-network","SEI"],
  ["stacks","STX"], ["dogwifhat","WIF"], ["jito-governance-token","JTO"], ["lido-dao","LDO"], ["pendle","PENDLE"],
  ["eigenlayer","EIGEN"], ["etherfi","ETHERFI"], ["popcat","POPCAT"], ["layerzero","ZRO"], ["virtuals-protocol","VIRTUAL"]
];

const fmt=(n,small)=>n.toLocaleString("en-US",{minimumFractionDigits:small?3:2,maximumFractionDigits:small?4:2});
const letter=sym=>`<span style="display:inline-block;width:18px;height:18px;line-height:18px;font-size:11px;font-weight:700;background:#40454f;border-radius:50%;text-align:center;color:#fff;">${sym[0]}</span>`;
const iconUrl=sym=>`https://raw.githubusercontent.com/spothq/cryptocurrency-icons/master/32/color/${sym.toLowerCase()}.png`;

async function load(){
  const banner=document.getElementById("banner");
  const track=document.getElementById("track");
  try{
    const idsStr=LIST.map(x=>x[0]).join(",");
    const cg="https://corsproxy.io/https://api.coingecko.com/api/v3/simple/price?ids="+idsStr+"&vs_currencies=usd&include_24hr_change=true";
    const data=await fetch(cg).then(r=>r.json());
    const parts=[];
    LIST.forEach(([slug,sym])=>{
      const d=data[slug];
      if(!d) return;
      const price=d.usd;
      if(price==null) return;
      const pct=d.usd_24h_change??0;
      const cls=pct>=0?"up":"down";
      const sign=pct>=0?"+":"";
      const img=`<img src="${iconUrl(sym)}" onerror="this.replaceWith('${letter(sym)}')">`;
      parts.push(`<div class="item">${img}<b>${sym}</b> $${fmt(price,price<1)} <span class="${cls}">${sign}${fmt(Math.abs(pct),true)}%</span></div>`);
    });
    if(!parts.length) throw new Error("empty");
    track.innerHTML=parts.join("")+parts.join("");
  }catch(e){
    console.error(e);
    banner.textContent="⚠️ erro ao carregar preços";
  }
}

load();
setInterval(load,60000);
</script>
</body>
</html>
